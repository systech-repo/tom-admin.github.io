<!DOCTYPE html>
<html lang="fr">
<head>
		<title>tom-admin &mdash; Shell Memento #I</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="https://tom-admin.github.io/theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="tom-admin — Flux Atom"
			href="https://tom-admin.github.io/" /> 
		<!--[if lte IE 8]><script src="https://tom-admin.github.io/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background " >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="https://tom-admin.github.io">tom-admin</a></h1>
<h2 id="site-description">#!/dev/tom-admin</h2>		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://tom-admin.github.io/category/astuces.html">Astuces</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://tom-admin.github.io/category/linux.html">Linux</a></li>
						<li class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://tom-admin.github.io/category/memento.html">Memento</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://tom-admin.github.io/category/pelican.html">Pelican</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://tom-admin.github.io/category/python.html">Python</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://tom-admin.github.io/category/revisions.html">Révisions</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://tom-admin.github.io/category/scripting.html">Scripting</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
		</div>
	
		<div id="contents">

<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://tom-admin.github.io/shell-memento-i.html">dim. 22 février 2015</a></div>
		<span class="byline">By <a href="https://tom-admin.github.io/author/mobius.html">Mobius</a></span>
			<span class="cat-links"><a href="https://tom-admin.github.io/category/memento.html" title="View all posts in Memento" rel="category tag">Memento</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://tom-admin.github.io/shell-memento-i.html" title="Permalink to Shell Memento #I" rel="bookmark">Shell Memento #I</a>
		</h2>
		<div class="entry-content">
			<div class="section" id="effectuer-des-tests">
<h2>Effectuer des tests</h2>
<div class="section" id="structure-de-base">
<h3>Structure de base</h3>
<pre class="code bash literal-block">
<span class="c1"># si ma condition est vraie alors faire
</span><span class="k">if</span> condition
    <span class="k">then</span> action<span class="o">(</span>s<span class="o">)</span>
<span class="k">fi</span>

<span class="c1"># si ma condition est vraie faire sinon faire
</span><span class="k">if</span> condition
    <span class="k">then</span> action<span class="o">(</span>s<span class="o">)</span>
    <span class="k">else</span> action<span class="o">(</span>s<span class="o">)</span>
<span class="k">fi</span>

<span class="c1"># si ma condition est vraie faire sinon si ma condition2 est vraie faire sinon
</span><span class="k">if</span> condition
    <span class="k">then</span> action<span class="o">(</span>s<span class="o">)</span>
    <span class="k">elif</span> condition<span class="p">;</span> <span class="k">then</span> action<span class="o">(</span>s<span class="o">)</span> <span class="c1"># libre à nous de rajouter encore des elif
</span>    <span class="k">else</span> action<span class="o">(</span>s<span class="o">)</span>
<span class="k">fi</span>
</pre>
</div>
<div class="section" id="exemples">
<h3>Exemples :</h3>
<pre class="code bash literal-block">
<span class="c1"># exemple avec une seule condition
</span><span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>whoami<span class="k">)</span> !<span class="o">=</span> <span class="s2">&quot;root&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;only root can perform this action&quot;</span><span class="p">;</span> <span class="nb">exit</span> 1<span class="p">;</span><span class="k">fi</span>

<span class="c1"># exemple avec plusieurs conditions
</span><span class="nb">read</span> -p <span class="s2">&quot;Saisir votre note : &quot;</span> note
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$note</span><span class="s2">&quot;</span> -ge <span class="m">16</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Excellent&quot;</span>
    <span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$note</span><span class="s2">&quot;</span> -ge <span class="m">14</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Bravo&quot;</span>
    <span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$note</span><span class="s2">&quot;</span> -ge <span class="m">12</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Assez bien&quot;</span>
    <span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$note</span><span class="s2">&quot;</span> -ge <span class="m">10</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Passable&quot;</span>
    <span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$note</span><span class="s2">&quot;</span> -le <span class="m">10</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Nul&quot;</span>
<span class="k">fi</span>
</pre>
</div>
<div class="section" id="operateurs-comparaisons-fichiers">
<h3>Opérateurs comparaisons fichiers :</h3>
<ul class="simple">
<li><strong>-a</strong> vrai si le fichier existe bel et bien (<em>a</em> -&gt; <strong>all</strong>)</li>
<li><strong>-b</strong> vrai si le fichier existe <strong>et</strong> est de type bloc (<em>b</em> -&gt; <strong>block-type</strong>)</li>
<li><strong>-c</strong> vrai si le fichier existe <strong>et</strong> est de type caractère (<em>c</em> -&gt; <strong>character</strong>)</li>
<li><strong>-f</strong> vrai si le fichier existe <strong>et</strong> est de type fichier (<em>f</em> -&gt; <strong>file type</strong>)</li>
<li><strong>-d</strong> vrai si le fichier existe <strong>et</strong> est un répertoire (<em>d</em> -&gt; <strong>directory</strong>)</li>
<li><strong>-r</strong> vrai si le fichier existe <strong>et</strong> est accessible en lecture (<em>r</em> -&gt; <strong>read</strong>)</li>
<li><strong>-w</strong> vrai si le fichier existe <strong>et</strong> est accessible en écriture (<em>w</em> -&gt; <strong>write</strong>)</li>
<li><strong>-x</strong> vrai si le fichier existe <strong>et</strong> est exécutable (<em>x</em> -&gt; <strong>execute</strong>)</li>
<li><strong>-G</strong> vrai si le fichier existe <strong>et</strong> appartient au groupe de l'utilisateur courant (<em>G</em> -&gt; <strong>Group</strong>)</li>
<li><strong>-O</strong> vrai si le fichier existe <strong>et</strong> appartient à l'utilisateur courant (<em>O</em> -&gt; <strong>Owner</strong>)</li>
<li><strong>-S</strong> vrai si le fichier est de type socket (<em>S</em> -&gt; <strong>socket file</strong>)</li>
<li><strong>-k</strong> vrai si le fichier possède le sticky-bit en mode actif (<em>k</em> -&gt; <strong>socket On</strong>)</li>
<li><strong>-s</strong> vrai si le fichier existe et à une taille non nulle (<em>s</em> -&gt; <strong>size</strong>)</li>
<li><strong>-L</strong> vrai si le fichier existe et est de type lien symbolique (<em>L</em> -&gt; <strong>symbolic Link</strong>)</li>
<li><strong>-ef</strong> vrai si le fichier 1 est égale au fichier 2 (<em>ef</em> -&gt; <strong>equal file</strong>)</li>
<li><strong>-nt</strong> vrai si le fichier existe et est plus récent que le fichier 2 (<em>nt</em> -&gt; <strong>newer than</strong>)</li>
<li><strong>-nt</strong> vrai si le fichier existe et est plus récent que le fichier 2 (<em>nt</em> -&gt; <strong>newer than</strong>)</li>
<li><strong>-ot</strong> vrai si le fichier existe et est plus ancien que le fichier 2 (<em>ot</em> -&gt; <strong>older than</strong>)</li>
</ul>
</div>
<div class="section" id="id1">
<h3>Exemples :</h3>
<pre class="code bash literal-block">
<span class="c1"># Paramètres
</span><span class="nv">fichier</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="nv">fichier2</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>

<span class="c1"># Actions
</span><span class="k">if</span> <span class="o">[</span> -a <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> existe&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -b <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est de type bloc&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -c <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est de type caractère&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est de type fichier&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -d <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est un répertoire&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -r <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est accessible en lecture&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -w <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est accessible en écriture&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -G <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> appartient au groupe de l'utilisateur&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -O <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> appartient à l'utilisateur&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -L <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est un lien symbolique&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -S <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est un socket&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -k <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> possède le sticky bit&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -s <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> a une taille non nulle&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> -ef <span class="s2">&quot;</span><span class="nv">$fichier2</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est égal à </span><span class="nv">$fichier2</span><span class="s2">&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> -nt <span class="s2">&quot;</span><span class="nv">$fichier2</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est plus récent que le </span><span class="nv">$fichier2</span><span class="s2">&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2">&quot;</span> -ot <span class="s2">&quot;</span><span class="nv">$fichier2</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$fichier</span><span class="s2"> est plus ancien </span><span class="nv">$fichier2</span><span class="s2">&quot;</span><span class="p">;</span><span class="k">fi</span>
</pre>
</div>
<div class="section" id="operateurs-comparaisons-chaines-de-caractere">
<h3>Opérateurs comparaisons chaînes de caractère :</h3>
<ul class="simple">
<li><strong>-n</strong> vrai si la longueur de la chaîne est non-nulle (<em>n</em> -&gt; <strong>null</strong>)</li>
<li><strong>-z</strong> vrai si la longueur de la chaîne est nulle (<em>z</em> -&gt; <strong>zero</strong>)</li>
<li><strong>=</strong> vrai si les deux expressions si identiques</li>
<li><strong>==</strong> vrai si les deux expressions si identiques</li>
<li><strong>!=</strong> vrai si les deux expressions sont différentes</li>
</ul>
</div>
<div class="section" id="id2">
<h3>Exemples :</h3>
<pre class="code bash literal-block">
<span class="c1"># Variables
</span><span class="nv">chaine_1</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>
<span class="nv">chaine_2</span><span class="o">=</span><span class="s2">&quot;&quot;</span>

<span class="c1"># Actions
</span><span class="k">if</span> <span class="o">[</span> -n <span class="s2">&quot;</span><span class="nv">$chaine_1</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;La chaîne </span><span class="nv">$chaine_1</span><span class="s2"> est non nulle&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&quot;</span><span class="nv">$chaine_2</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;La chaîne </span><span class="nv">$chaine_1</span><span class="s2"> est nulle&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$chaine_1</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="nv">$chaine_2</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;La chaîne 1 est égale à la chaîne 2&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$chaine_1</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="nv">$chaine_2</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;La chaîne 1 est égale à la chaîne 2&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$chaine_1</span><span class="s2">&quot;</span> !<span class="o">=</span> <span class="s2">&quot;</span><span class="nv">$chaine_2</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;La chaîne 1 est != de la chaîne 2&quot;</span><span class="p">;</span><span class="k">fi</span>
</pre>
</div>
<div class="section" id="operateurs-comparaisons-entiers">
<h3>Opérateurs comparaisons entiers :</h3>
<ul class="simple">
<li><strong>-eq</strong> vrai en cas d'égalité (<em>eq</em> -&gt; <strong>equal</strong>)</li>
<li><strong>-ne</strong> vrai en cas d'inégalité (<em>ne</em> -&gt; <strong>not equal</strong>)</li>
<li><strong>-gt</strong> vrai en cas de supériorité stricte (<em>gt</em> -&gt; <strong>grower than</strong>)</li>
<li><strong>-ge</strong> vrai en cas de supériorité ou d'égalité (<em>ge</em> -&gt; <strong>grower or equal</strong>)</li>
<li><strong>-lt</strong> vrai en cas d'infériorité stricte (<em>lt</em> -&gt; <strong>lower than</strong>)</li>
<li><strong>-le</strong> vrai en cas d'infériorité ou d'égalité (<em>le</em> -&gt; <strong>lower or equal</strong>)</li>
</ul>
</div>
<div class="section" id="id3">
<h3>Exemples :</h3>
<pre class="code bash literal-block">
<span class="c1"># Vérification utilisateur
</span><span class="k">if</span> <span class="o">[</span> <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UID</span><span class="k">)</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Pas root&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UID</span><span class="k">)</span> -ge <span class="m">1000</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Simple utilisateur&quot;</span><span class="p">;</span><span class="k">fi</span>

<span class="c1"># Comparons des nombres
</span><span class="k">if</span> <span class="o">[</span> <span class="m">4</span> -eq <span class="m">4</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Les deux nombres sont égaux&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="m">5</span> -ne <span class="m">4</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Les deux nombres sont inégaux&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="m">5</span> -gt <span class="m">4</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Nombre 1 est plus grand que nombre 2&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="m">4</span> -ge <span class="m">4</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Nombre 1 est plus grand ou égal à nombre 2&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="m">3</span> -lt <span class="m">4</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Nombre 1 est plus petit que nombre 2&quot;</span><span class="p">;</span><span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> <span class="m">4</span> -le <span class="m">4</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;Nombre 1 est plus petit ou égal à nombre 2&quot;</span><span class="p">;</span><span class="k">fi</span>
</pre>
</div>
<div class="section" id="cas-speciaux-complexes">
<h3>Cas spéciaux / complexes :</h3>
<pre class="code bash literal-block">
<span class="c1"># Tester le code de retour de la commande précédente
</span><span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;la commande précédente n'a pas rencontré de problème(s)&quot;</span><span class="p">;</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>ls /home/<span class="k">)</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;La commande précédente n'a pas rencontré de problème(s)&quot;</span><span class="p">;</span>
<span class="k">fi</span>

<span class="c1"># Test --&gt; ET LOGIQUE
# Variables
</span><span class="nv">prenom</span><span class="o">=</span><span class="s2">&quot;Antoine&quot;</span>
<span class="nv">nom</span><span class="o">=</span><span class="s2">&quot;LeBarbu&quot;</span>
<span class="nv">role</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span>

<span class="c1"># Actions
</span><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$prenom</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;Antoine&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$nom</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;LeBarbu&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$role</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;admin&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Les trois conditions sont respectées&quot;</span>
<span class="k">fi</span>

<span class="c1"># Test --&gt; OU LOGIQUE
#Variables
</span><span class="nv">prenom</span><span class="o">=</span><span class="s2">&quot;Antoine&quot;</span>
<span class="nv">nom</span><span class="o">=</span><span class="s2">&quot;LeBarbu&quot;</span>
<span class="nv">role</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span>

<span class="c1"># Actions
</span><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$prenom</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;Antoine&quot;</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$nom</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;LeBarbu&quot;</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$role</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;admin&quot;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Une (ou +) des trois conditions est au moins respectée&quot;</span>
<span class="k">fi</span>
</pre>
</div>
<div class="section" id="exemple">
<h3>Exemple</h3>
<pre class="code bash literal-block">
<span class="c1"># Variables
</span><span class="nv">prenom</span><span class="o">=</span><span class="s2">&quot;Thomas&quot;</span>

<span class="c1"># Testons le ET LOGIQUE
</span><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$prenom</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;Thomas&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UID</span><span class="k">)</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Thomas - simple utilisateur&quot;</span><span class="p">;</span>
<span class="k">fi</span>
</pre>
</div>
<div class="section" id="case-en-bash">
<h3><strong>Case</strong> en BASH :</h3>
<p>Ce que l'on appelle <em>case</em> est une instruction permettant de gérer plusieurs cas. Cette action est implémentée dans beaucoup de langages avec des noms différents (<strong>switch</strong> en <em>PHP</em>, <em>C</em> ...). Une application concrète va vous éclairer rapidement sur son utilisation :</p>
<pre class="code bash literal-block">
<span class="c1"># le switch de bash
</span>
<span class="c1"># affichage d'un menu
</span>
cat<span class="s">&lt;&lt;-EOF

[1]. Steak
[2]. Poisson
[3]. Salade Salakis

EOF</span>

<span class="c1"># action
</span><span class="nb">read</span> -p <span class="s2">&quot;Saisir votre choix : &quot;</span> choix

<span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$choix</span><span class="s2">&quot;</span> in
    <span class="m">1</span>   <span class="o">)</span> <span class="nb">echo</span> <span class="s2">&quot;Un bon gros Charal y'a rien de mieux !&quot;</span>     <span class="p">;;</span>
    <span class="m">2</span>   <span class="o">)</span> <span class="nb">echo</span> <span class="s2">&quot;C'est un bon poissonnet !&quot;</span>                  <span class="p">;;</span>
    <span class="m">3</span>   <span class="o">)</span> <span class="nb">echo</span> <span class="s2">&quot;Salakis au bon lait de brebisssss !&quot;</span>        <span class="p">;;</span>
    *   <span class="o">)</span> <span class="nb">echo</span> <span class="s2">&quot;Erreur de repas, bye !&quot;</span>                     <span class="p">;;</span>
<span class="k">esac</span>
</pre>
<p>Cet exemple affiche dans un premier temps le choix des menus à l'écran (<strong>cat&lt;&lt;-EOF</strong> jusqu'au second <strong>EOF</strong>) puis demande à l'utilisateur de saisir son voeu (<strong>read -p &quot;Saisir votre choix &quot; choix</strong>) qui sera stocké dans la variable <em>choix</em>. Ensuite vient la partie intéressante le case qui peut se résumer de la manière suivante ici : si le contenu de la variable <em>choix</em> est égal à 1 (soit le steak) alors afficher <em>Un bon gros Charal y'a rien de mieux !&quot;</em>, sinon si la variable <em>choix</em>
égale à 2 alors afficher <em>C'est un bon poissonnet</em> sinon si la variable <em>choix</em> est égale à3 afficher <em>Salakis au bon lait de brebisssss</em> sinon dans tous les autres cas non traités afficher <em>Erreur de repas, bye</em>.</p>
</div>
<div class="section" id="d-autres-possibilites-de-case">
<h3>D'autres possibilités de <strong>case</strong> :</h3>
<pre class="code bash literal-block">
<span class="c1"># variable note sur 15
</span><span class="nb">read</span> -p <span class="s2">&quot;Saisir votre note sur 15 : &quot;</span> note

<span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$note</span><span class="s2">&quot;</span> in

1<span class="o">[</span>0-5<span class="o">]</span>              <span class="o">)</span>   <span class="nb">echo</span> <span class="s2">&quot;Votre note est excellent&quot;</span>                <span class="p">;;</span>
<span class="o">[</span>0-9<span class="o">]</span>               <span class="o">)</span>   <span class="nb">echo</span> <span class="s2">&quot;Votre note sur 60 est variable&quot;</span>          <span class="p">;;</span>
absent<span class="p">|</span>inapte<span class="p">|</span>abs   <span class="o">)</span>   <span class="nb">echo</span> <span class="s2">&quot;Une chance que vous ayez été malade&quot;</span>     <span class="p">;;</span>
*                   <span class="o">)</span>   <span class="nb">echo</span> <span class="s2">&quot;Erreur&quot;</span>                                  <span class="p">;;</span>
<span class="k">esac</span>
</pre>
<p>Ainsi comme vous le voyez il est possible de combiner plusieurs cas avec <strong>|</strong> signifiant <em>ou</em> mais aussi de mettre des expressions régulières <strong>[0-9]</strong>...</p>
</div>
</div>

		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post-->

		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>